output_dir: test/out
images: test/images

resources:
  cpu:
    partition: cpu
    qos: normal
    gpu: 0
    mem_mb: 1000
  gpu:
    partition: gpu
    qos: normal
    gpu: 1
    mem_mb: 1000

defaults:
  integration:
    bbknn:
    combat:
    harmony:
    scanorama:
    scanvi:
      n_hidden: 128
      dispersion: gene
      max_epochs: 10
      use_observed_lib_size: true
    scgen:
    scpoli:
      supervised: true
      early_stopping_kwargs:
        early_stopping_metric: val_prototype_loss
        mode: min
        threshold: 0
        patience: 20
        reduce_lr: true
        lr_patience: 13
        lr_factor: 0.1
    scvi:
      n_hidden: 128
      dispersion:
        - gene
        - gene-batch
        - gene-label
        - gene-cell
      max_epochs: 10
      use_observed_lib_size: true
    unintegrated:
  datasets:
    - test

DATASETS:
  test:
    input:
      integration: test/data/pbmc68k.h5ad
    label: bulk_labels
    batch:
      - phase
      - batch_2
    lineage: batch

  test2:
    input:
      integration: test/data/pbmc68k.h5ad
    label: bulk_labels
    batch: batch
    lineage: phase
    integration:
      combat: