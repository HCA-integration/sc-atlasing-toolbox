output_dir: test/out
images: test/images

resources:
  cpu:
    partition: cpu_p
    qos: icb
    gpu: 0
  gpu:
    partition: gpu_p
    qos: gpu
    gpu: 1

defaults:
  integration:
    unintegrated:
    combat:
    scanorama:
    scvi:
      n_hidden: 128
      dispersion:
        - gene
        - gene-batch
        - gene-label
        - gene-cell
      max_epochs: 10
      use_observed_lib_size: true
    scanvi:
      n_hidden: 128
      dispersion: gene
      max_epochs: 10
      use_observed_lib_size: true
    scpoli:
      supervised: true
      early_stopping_kwargs:
        early_stopping_metric: val_prototype_loss
        mode: min
        threshold: 0
        patience: 20
        reduce_lr: true
        lr_patience: 13
        lr_factor: 0.1

DATASETS:
  test:
    label: bulk_labels
    batch: batch
    lineage: phase
    adata_file: ../../data/pbmc68k.h5ad
    integration:
      scpoli:
        supervised: true
        early_stopping_kwargs:
          early_stopping_metric: val_prototype_loss
          mode: min
          threshold: 0
          patience: 20
          reduce_lr: true
          lr_patience: 13
          lr_factor: 0.1

  test2:
    label: bulk_labels
    batch: batch
    lineage: phase
    adata_file: ../../data/pbmc68k.h5ad
    integration:
      combat: